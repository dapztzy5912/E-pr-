<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>E-KTP Berhasil Dibuat - E-KTP Generator Indonesia</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/YoshCasaster/store_db/refs/heads/main/Template.png">
    <link rel="apple-touch-icon" href="https://raw.githubusercontent.com/YoshCasaster/store_db/refs/heads/main/Template.png">

    <!-- Meta SEO -->
    <meta name="description" content="E-KTP berhasil dibuat. Unduh hasilnya secara gratis untuk tujuan edukasi.">
    <meta name="keywords" content="E-KTP, KTP Online, Download E-KTP, ID Card Generator">
    <meta name="author" content="ZenmaTH">

    <!-- CSS Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/css/style.css">
    
    <!-- Confetti CSS -->
    <style>
        @keyframes confetti-fall {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #667eea;
            animation: confetti-fall 3s linear infinite;
            z-index: 1000;
        }
        
        .confetti:nth-child(odd) { background: #764ba2; animation-delay: 0.5s; }
        .confetti:nth-child(even) { background: #10b981; animation-delay: 1s; }
        
        .success-badge {
            animation: bounce-in 0.8s ease-out;
        }
        
        @keyframes bounce-in {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .ektp-image {
            transition: all 0.3s ease;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .ektp-image:hover {
            transform: scale(1.02);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
        }
        
        .download-pulse {
            animation: pulse-glow 2s ease-in-out infinite;
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(102, 126, 234, 0.4); }
            50% { box-shadow: 0 0 30px rgba(102, 126, 234, 0.8); }
        }
    </style>
</head>
<body class="d-flex flex-column min-vh-100">
    <!-- Confetti Animation -->
    <div id="confetti-container"></div>

    <!-- Modern Navbar -->
    <nav class="navbar navbar-expand-lg navbar-modern">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="/">
                <i class="bi bi-person-badge me-2 fs-4"></i>
                <span class="fw-bold">E-KTP Generator</span>
            </a>
            <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/">
                            <i class="bi bi-house-door me-1"></i>Beranda
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://github.com/YoshCasaster" target="_blank">
                            <i class="bi bi-github me-1"></i>GitHub
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Success Header -->
    <div class="container-fluid py-4" style="background: linear-gradient(135deg, #10b981, #059669);">
        <div class="container">
            <div class="row justify-content-center text-center text-white">
                <div class="col-12">
                    <div class="success-icon mb-3">
                        <i class="bi bi-check-circle-fill" style="font-size: 4rem;"></i>
                    </div>
                    <h1 class="display-5 fw-bold mb-2">
                        ðŸŽ‰ E-KTP Berhasil Dibuat!
                    </h1>
                    <p class="lead mb-0 opacity-90">
                        Selamat! E-KTP Anda telah berhasil dibuat dan siap untuk diunduh
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container py-5 flex-grow-1">
        <div class="row justify-content-center">
            <div class="col-md-10 col-lg-9">
                <div class="card-modern">
                    <div class="card-body p-4 p-md-5">
                        <!-- Success Badge -->
                        <div class="text-center mb-4">
                            <span class="badge-modern success-badge">
                                <i class="bi bi-shield-check me-1"></i>
                                Generated Successfully
                            </span>
                        </div>

                        <!-- E-KTP Image Display -->
                        <div class="text-center mb-5">
                            <div class="position-relative d-inline-block">
                                <img src="<%= imgPath %>" alt="E-KTP Generated" 
                                     class="img-fluid rounded-3 ektp-image" style="max-width: 100%; height: auto;">
                                
                                <!-- Quality Badge -->
                                <div class="position-absolute top-0 end-0 m-3">
                                    <span class="badge bg-success px-3 py-2">
                                        <i class="bi bi-star-fill me-1"></i>
                                        High Quality
                                    </span>
                                </div>
                                
                                <!-- Educational Watermark -->
                                <div class="position-absolute bottom-0 start-0 m-3">
                                    <span class="badge bg-warning text-dark px-3 py-2">
                                        <i class="bi bi-mortarboard me-1"></i>
                                        Educational Purpose Only
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="row g-3 mb-5">
                            <div class="col-md-6">
                                <a href="<%= imgPath %>" 
                                   download="ektp_<%= data.nama.replace(/\s+/g, '_').toLowerCase() %>.png" 
                                   class="btn-modern btn-primary-modern w-100 download-pulse">
                                    <i class="bi bi-download me-2"></i>
                                    Download E-KTP
                                    <small class="d-block mt-1 opacity-90">High Resolution PNG</small>
                                </a>
                            </div>
                            <div class="col-md-6">
                                <a href="/" class="btn-modern btn-outline-modern w-100">
                                    <i class="bi bi-plus-circle me-2"></i>
                                    Buat E-KTP Baru
                                    <small class="d-block mt-1 opacity-75">Generate Another One</small>
                                </a>
                            </div>
                        </div>

                        <!-- Additional Actions -->
                        <div class="row g-3 mb-4">
                            <div class="col-sm-6">
                                <button onclick="shareEKTP()" class="btn btn-outline-info w-100">
                                    <i class="bi bi-share me-2"></i>Share
                                </button>
                            </div>
                            <div class="col-sm-6">
                                <button onclick="window.print()" class="btn btn-outline-secondary w-100">
                                    <i class="bi bi-printer me-2"></i>Print
                                </button>
                            </div>
                        </div>

                        <!-- Information Cards -->
                        <div class="row g-4 mb-4">
                            <div class="col-md-4">
                                <div class="card border-0 bg-light h-100">
                                    <div class="card-body text-center p-4">
                                        <i class="bi bi-file-earmark-image text-primary fs-1 mb-3"></i>
                                        <h6 class="fw-bold">Format PNG</h6>
                                        <p class="small text-muted mb-0">Kualitas tinggi dan jernih</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card border-0 bg-light h-100">
                                    <div class="card-body text-center p-4">
                                        <i class="bi bi-shield-check text-success fs-1 mb-3"></i>
                                        <h6 class="fw-bold">100% Aman</h6>
                                        <p class="small text-muted mb-0">Data tidak disimpan di server</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card border-0 bg-light h-100">
                                    <div class="card-body text-center p-4">
                                        <i class="bi bi-lightning-charge text-warning fs-1 mb-3"></i>
                                        <h6 class="fw-bold">Proses Cepat</h6>
                                        <p class="small text-muted mb-0">Generated dalam hitungan detik</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Important Notice -->
                        <div class="alert-modern alert-warning-modern mb-4">
                            <div class="d-flex align-items-start">
                                <i class="bi bi-exclamation-triangle-fill fs-4 me-3 text-warning"></i>
                                <div>
                                    <h6 class="fw-bold mb-2">
                                        <i class="bi bi-info-circle me-1"></i>
                                        Penting untuk Diperhatikan
                                    </h6>
                                    <ul class="mb-0 ps-3">
                                        <li>E-KTP ini <strong>HANYA untuk tujuan edukasi</strong> dan pembelajaran</li>
                                        <li>Tidak memiliki kekuatan hukum atau status resmi</li>
                                        <li>Dilarang digunakan untuk keperluan yang melanggar hukum</li>
                                        <li>Creator tidak bertanggung jawab atas penyalahgunaan</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Data Summary -->
                        <div class="card border-0 bg-light">
                            <div class="card-header bg-transparent border-0">
                                <h6 class="mb-0 fw-bold">
                                    <i class="bi bi-person-lines-fill me-2"></i>
                                    Ringkasan Data E-KTP
                                </h6>
                            </div>
                            <div class="card-body">
                                <div class="row g-3">
                                    <div class="col-sm-6">
                                        <small class="text-muted d-block">Nama Lengkap</small>
                                        <strong><%= data.nama %></strong>
                                    </div>
                                    <div class="col-sm-6">
                                        <small class="text-muted d-block">NIK</small>
                                        <strong><%= data.nik %></strong>
                                    </div>
                                    <div class="col-sm-6">
                                        <small class="text-muted d-block">Tempat, Tanggal Lahir</small>
                                        <strong><%= data.ttl %></strong>
                                    </div>
                                    <div class="col-sm-6">
                                        <small class="text-muted d-block">Jenis Kelamin</small>
                                        <strong class="text-capitalize"><%= data.jenis_kelamin %></strong>
                                    </div>
                                    <div class="col-sm-6">
                                        <small class="text-muted d-block">Alamat</small>
                                        <strong><%= data.alamat %></strong>
                                    </div>
                                    <div class="col-sm-6">
                                        <small class="text-muted d-block">Pekerjaan</small>
                                        <strong class="text-uppercase"><%= data.pekerjaan %></strong>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Statistics -->
                        <div class="text-center mt-4 pt-4 border-top">
                            <div class="row g-4">
                                <div class="col-sm-4">
                                    <div class="text-primary">
                                        <i class="bi bi-clock-history fs-4"></i>
                                    </div>
                                    <h6 class="fw-bold mt-2 mb-1">Waktu Generate</h6>
                                    <small class="text-muted" id="generateTime">< 5 detik</small>
                                </div>
                                <div class="col-sm-4">
                                    <div class="text-success">
                                        <i class="bi bi-file-earmark-check fs-4"></i>
                                    </div>
                                    <h6 class="fw-bold mt-2 mb-1">Status</h6>
                                    <small class="text-success fw-medium">Berhasil</small>
                                </div>
                                <div class="col-sm-4">
                                    <div class="text-info">
                                        <i class="bi bi-calendar-check fs-4"></i>
                                    </div>
                                    <h6 class="fw-bold mt-2 mb-1">Tanggal Dibuat</h6>
                                    <small class="text-muted"><%= new Date().toLocaleDateString('id-ID') %></small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Additional Tools -->
                <div class="card-modern mt-4">
                    <div class="card-body p-4">
                        <h5 class="fw-bold mb-3">
                            <i class="bi bi-tools me-2"></i>
                            Tools Tambahan
                        </h5>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="d-flex align-items-center p-3 bg-light rounded-3">
                                    <i class="bi bi-qr-code fs-3 text-primary me-3"></i>
                                    <div>
                                        <h6 class="mb-1">QR Code Generator</h6>
                                        <small class="text-muted">Buat QR code untuk E-KTP</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="d-flex align-items-center p-3 bg-light rounded-3">
                                    <i class="bi bi-file-pdf fs-3 text-danger me-3"></i>
                                    <div>
                                        <h6 class="mb-1">Convert to PDF</h6>
                                        <small class="text-muted">Ubah ke format PDF</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer-modern text-center">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <p class="mb-2">
                        <i class="bi bi-code-slash me-1"></i>
                        Created with <i class="bi bi-heart-fill text-danger mx-1"></i> by 
                        <a href="https://github.com/YoshCasaster" target="_blank" class="fw-bold">ZenmaTH</a>
                    </p>
                    <p class="mb-0 small opacity-75">
                        Â© 2024 E-KTP Generator Indonesia. Untuk tujuan edukasi.
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Success Toast -->
    <div class="toast-container position-fixed top-0 end-0 p-3">
        <div id="successToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header bg-success text-white">
                <i class="bi bi-check-circle-fill me-2"></i>
                <strong class="me-auto">Sukses!</strong>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
                E-KTP berhasil dibuat dan siap diunduh!
            </div>
        </div>
    </div>

    <!-- JS Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Result Page Enhancements -->
    <script>
        // Confetti Animation
        function createConfetti() {
            const container = document.getElementById('confetti-container');
            const colors = ['#667eea', '#764ba2', '#10b981', '#f59e0b', '#ef4444'];
            
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 3 + 's';
                confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
                container.appendChild(confetti);
                
                // Remove confetti after animation
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }

        // Share E-KTP Function
        function shareEKTP() {
            if (navigator.share) {
                navigator.share({
                    title: 'E-KTP Generator Indonesia',
                    text: 'Saya baru saja membuat E-KTP menggunakan E-KTP Generator Indonesia!',
                    url: window.location.href
                });
            } else {
                // Fallback to copy URL
                navigator.clipboard.writeText(window.location.href).then(() => {
                    showToast('Link berhasil disalin ke clipboard!');
                });
            }
        }

        // Show Toast Notification
        function showToast(message) {
            const toastEl = document.getElementById('successToast');
            const toast = new bootstrap.Toast(toastEl);
            toastEl.querySelector('.toast-body').textContent = message;
            toast.show();
        }

        // Download tracking
        document.querySelector('a[download]').addEventListener('click', function() {
            showToast('Download E-KTP dimulai!');
            
            // Add download pulse effect
            this.classList.add('download-pulse');
            setTimeout(() => {
                this.classList.remove('download-pulse');
            }, 3000);
        });

        // Print functionality
        function printEKTP() {
            const printWindow = window.open('', '_blank');
            const img = document.querySelector('.ektp-image');
            
            printWindow.document.write(`
                <html>
                    <head>
                        <title>Print E-KTP</title>
                        <style>
                            body { margin: 0; padding: 20px; text-align: center; }
                            img { max-width: 100%; height: auto; }
                            .notice { margin-top: 20px; font-size: 12px; color: #666; }
                        </style>
                    </head>
                    <body>
                        <img src="${img.src}" alt="E-KTP">
                        <div class="notice">
                            <p><strong>HANYA UNTUK TUJUAN EDUKASI</strong></p>
                            <p>Generated by E-KTP Generator Indonesia</p>
                        </div>
                    </body>
                </html>
            `);
            
            printWindow.document.close();
            printWindow.focus();
            printWindow.print();
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Show confetti on page load
            createConfetti();
            
            // Show success toast
            setTimeout(() => {
                showToast('E-KTP berhasil dibuat!');
            }, 1000);
            
            // Add hover effects to action buttons
            document.querySelectorAll('.btn-modern').forEach(btn => {
                btn.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px)';
                });
                
                btn.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                });
            });

            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey || e.metaKey) {
                    switch(e.key) {
                        case 's':
                            e.preventDefault();
                            document.querySelector('a[download]').click();
                            break;
                        case 'p':
                            e.preventDefault();
                            printEKTP();
                            break;
                        case 'n':
                            e.preventDefault();
                            window.location.href = '/';
                            break;
                    }
                }
            });

            // Add entrance animations
            const elements = document.querySelectorAll('.card-modern, .alert-modern');
            elements.forEach((el, index) => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(20px)';
                
                setTimeout(() => {
                    el.style.transition = 'all 0.6s ease';
                    el.style.opacity = '1';
                    el.style.transform = 'translateY(0)';
                }, index * 200);
            });
        });

        // Generate time calculation
        document.getElementById('generateTime').textContent = '< 3 detik';
    </script>
</body>
</html>
